<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AVR32 - FAT Services: play_list.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>play_list.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Play list Services. 
<p>
This plug-in allow to open and manage a play list file (*.txt,*.m3u,*.m3u8,...) included in text file This plug-in is connected on the reader_txt plug-in and the navigation module.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br>
 Support and FAQ: <a href="http://support.atmel.no/">http://support.atmel.no/</a> </dd></dl>

<p>Definition in file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &quot;<a class="el" href="a00068.html">conf_explorer.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00095.html">navigation.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00076.html">file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00099.html">reader_txt.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00097.html">play_list.h</a>&quot;</code><br>

<p>
<a href="a00096.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#62b5e2d461423679288c3fc8fe1097d1">PL_READONLY</a>&nbsp;&nbsp;&nbsp;DISABLED</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef1918">E_pl_type</a> { <a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681">E_PL_M3U</a>, 
<a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751">E_PL_PLS</a>, 
<a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd">E_PL_SMP</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type of playlist file.  <a href="a00049.html#0c3455f08337dedcd64aa31097ef1918">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#eeb0d95a543d3f02445441fb48f31e94">pl_add</a> (const <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> sz_filterext, U8 u8_mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function adds files in play list.  <a href="#eeb0d95a543d3f02445441fb48f31e94"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#731915be2d7a8637628d7c7de0976a58">pl_main_close</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function closes the play list and selects this one in current navigator.  <a href="#731915be2d7a8637628d7c7de0976a58"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#c17b4ba78b0f72b5a27a5b9170b8b99a">pl_main_ismodify</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks if the play list file is modified.  <a href="#c17b4ba78b0f72b5a27a5b9170b8b99a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b">pl_main_isopen</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks if a play list file is already opened.  <a href="#9dfed43a52815cf4c80eaaeee7b3f06b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#91909ac1c0efb364b14637df0dc516fa">pl_main_modify</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function creates a copy of the play list in case of a restore action.  <a href="#91909ac1c0efb364b14637df0dc516fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#28596b7211516825f03e2b6528b8c982">pl_main_new</a> (const <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> sz_name, Bool b_undo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function creates a new empty play list file.  <a href="#28596b7211516825f03e2b6528b8c982"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#2d95d9d024a3e2055cebd7879eed875f">pl_main_open</a> (Bool b_undo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function opens the current selected file in the current navigator.  <a href="#2d95d9d024a3e2055cebd7879eed875f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#f01e79587fade6bdd9afc994843d364c">pl_main_readline</a> (<a class="el" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f0">readline_opt_t</a> opt, U8 id_nav, <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> *sz_path, U16 *u16_size_line)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function reads and checks the next line.  <a href="#f01e79587fade6bdd9afc994843d364c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#f36810c870399b35945b36efd7da532b">pl_main_save</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function saves the play list file.  <a href="#f36810c870399b35945b36efd7da532b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#0350caecfa4644339ab48b935c50a130">pl_nav_eol</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks the end of the play list.  <a href="#0350caecfa4644339ab48b935c50a130"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#ed3d15a8053fda6c27415dc86cd8b4c7">pl_nav_getnbfile</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of files in play list.  <a href="#ed3d15a8053fda6c27415dc86cd8b4c7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#c0002b15d45c8e76617857c69611cf72">pl_nav_getpos</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the position in the play list.  <a href="#c0002b15d45c8e76617857c69611cf72"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#0702e322eb3f0ab2bb4ac574cb51f31e">pl_nav_readentry</a> (U16 u16_position, <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> *sz_path, U16 *u16_size_line)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function read the playliost's entry at a specific position.  <a href="#0702e322eb3f0ab2bb4ac574cb51f31e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#6762440ecae73bb09b47f5c6eadf41bf">pl_nav_setpos</a> (U16 u16_position)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function goes to a position in the play list.  <a href="#6762440ecae73bb09b47f5c6eadf41bf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#abfd8b5e7bb120c39ff07e87e84474f6">pl_rem_dead</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function remove the dead file in the list.  <a href="#abfd8b5e7bb120c39ff07e87e84474f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#8be06ed22f78ede3e41cc52b7ab6b085">pl_rem_sel</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function removes the selected file in the list.  <a href="#8be06ed22f78ede3e41cc52b7ab6b085"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#740b78bbbd6b515f6aea668466e4b279">pl_rem_sel_all</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function removes all files in the list.  <a href="#740b78bbbd6b515f6aea668466e4b279"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#bc2272f9c3366519ca4944ea505c0eef">pl_sel_isvalid</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function tests the valid path in list.  <a href="#bc2272f9c3366519ca4944ea505c0eef"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00008.html">Fs_index</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#a351d7cd2bb575811ad1be1b9509cef1">copyfile_index</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">File system index on the copy file of play list file (undo option must be ENABLE).  <a href="#a351d7cd2bb575811ad1be1b9509cef1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#da525c5a94216aa2c7980ae097424b3d">pl_g_list_is_modify</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If TRUE then the current play list file is modified but it is not saved.  <a href="#da525c5a94216aa2c7980ae097424b3d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7">pl_g_list_is_open</a> = FALSE</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">play list file is opened  <a href="#ddc3fb7e481bcf02c8c6057b43c0a8d7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#d94e57810cfe431db7a638d79b188a7b">pl_g_list_is_readonly</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If FALSE then the play list modification is autorized.  <a href="#d94e57810cfe431db7a638d79b188a7b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ <a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef1918">E_pl_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4">pl_g_list_type</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type of the play list.  <a href="#56182ff5f21080cdc39eb8270b329ea4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce">pl_g_list_undo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If TRUE then authorize to copy the play list file in case of an undo on modifications.  <a href="#19ec89ed8b80790dfa2403cde5f8b2ce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c">pl_g_u16_list_sel</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current file selected in play list (0= no file selected, 1= first file).  <a href="#43c5d67b8ebe2758b7362f58b755351c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0">pl_g_u16_list_size</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of file included in play list.  <a href="#a18a22be8e8c964836b6d3abe35fe2d0"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="62b5e2d461423679288c3fc8fe1097d1"></a><!-- doxytag: member="play_list.c::PL_READONLY" ref="62b5e2d461423679288c3fc8fe1097d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PL_READONLY&nbsp;&nbsp;&nbsp;DISABLED          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="a00096.html#l00057">57</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="0c3455f08337dedcd64aa31097ef1918"></a><!-- doxytag: member="play_list.c::E_pl_type" ref="0c3455f08337dedcd64aa31097ef1918" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef1918">E_pl_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Type of playlist file. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681"></a><!-- doxytag: member="E_PL_M3U" ref="0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681" args="" -->E_PL_M3U</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751"></a><!-- doxytag: member="E_PL_PLS" ref="0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751" args="" -->E_PL_PLS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd"></a><!-- doxytag: member="E_PL_SMP" ref="0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd" args="" -->E_PL_SMP</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="a00096.html#l00078">78</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00078"></a>00078              {
<a name="l00079"></a>00079    <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681">E_PL_M3U</a>,
<a name="l00080"></a>00080    <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751">E_PL_PLS</a>,
<a name="l00081"></a>00081    <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd">E_PL_SMP</a>
<a name="l00082"></a>00082 } <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef1918" title="Type of playlist file.">E_pl_type</a>;
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="eeb0d95a543d3f02445441fb48f31e94"></a><!-- doxytag: member="play_list.c::pl_add" ref="eeb0d95a543d3f02445441fb48f31e94" args="(const FS_STRING sz_filterext, U8 u8_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_add           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_filterext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function adds files in play list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_filterext</em>&nbsp;</td><td>add file only corresponding to the extension filter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u8_mode</em>&nbsp;</td><td>PL_ADD_FILE, PL_ADD_DIR, PL_ADD_SUBDIR</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! It is possible to select a file or all files in a directory
//! </pre></div> 
<p>Definition at line <a class="el" href="a00096.html#l00705">705</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00075.html#l00363">file_getc()</a>, <a class="el" href="a00075.html#l00599">file_putc()</a>, <a class="el" href="a00075.html#l00653">file_seek()</a>, <a class="el" href="a00095.html#l00051">FS_FIND_NEXT</a>, <a class="el" href="a00076.html#l00055">FS_SEEK_END</a>, <a class="el" href="a00076.html#l00054">FS_SEEK_SET</a>, <a class="el" href="a00094.html#l01189">nav_dir_cd()</a>, <a class="el" href="a00094.html#l01219">nav_dir_gotoparent()</a>, <a class="el" href="a00094.html#l01905">nav_file_checkext()</a>, <a class="el" href="a00094.html#l01892">nav_file_isdir()</a>, <a class="el" href="a00094.html#l01856">nav_file_lgt()</a>, <a class="el" href="a00094.html#l00676">nav_filelist_reset()</a>, <a class="el" href="a00094.html#l00726">nav_filelist_set()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l01411">nav_getcwd()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00094.html#l00098">nav_string_ascii()</a>, <a class="el" href="a00094.html#l00087">nav_string_unicode()</a>, <a class="el" href="a00097.html#l00053">PL_ADD_FILE</a>, <a class="el" href="a00097.html#l00055">PL_ADD_SUBDIR</a>, <a class="el" href="a00068.html#l00115">pl_cache_path</a>, <a class="el" href="a00068.html#l00118">PL_CACHE_PATH_MAX_SIZE</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, and <a class="el" href="a00096.html#l00336">pl_main_modify()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00706"></a>00706 {
<a name="l00707"></a>00707    U8 nav_id_save;
<a name="l00708"></a>00708    U8 u8_folder_level;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#91909ac1c0efb364b14637df0dc516fa" title="This function creates a copy of the play list in case of a restore action.">pl_main_modify</a>() )
<a name="l00711"></a>00711       <span class="keywordflow">return</span> FALSE;
<a name="l00712"></a>00712    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00713"></a>00713 
<a name="l00714"></a>00714    <span class="comment">// Check last character of file</span>
<a name="l00715"></a>00715    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00716"></a>00716    <span class="keywordflow">if</span>( 0!=<a class="code" href="a00047.html#c3989dc4a26fbbdf0726fafae6fe4648" title="This function returns the size of selected file (unit byte).">nav_file_lgt</a>() )
<a name="l00717"></a>00717    {
<a name="l00718"></a>00718 <span class="preprocessor">#if( PL_UNICODE == ENABLED)</span>
<a name="l00719"></a>00719 <span class="preprocessor"></span>      file_string_unicode();
<a name="l00720"></a>00720       <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 2, <a class="code" href="a00029.html#ea9734cc236a73aefd3b35444d08d39d" title="start at the end of file and rewind">FS_SEEK_END</a>);
<a name="l00721"></a>00721       <span class="keywordflow">if</span>( <span class="charliteral">'\n'</span> != <a class="code" href="a00028.html#952fd54b2e49943d138e44d3bdf569bf" title="This function returns the next byte of file.">file_getc</a>())
<a name="l00722"></a>00722       {
<a name="l00723"></a>00723          <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 2, <a class="code" href="a00029.html#ea9734cc236a73aefd3b35444d08d39d" title="start at the end of file and rewind">FS_SEEK_END</a>);
<a name="l00724"></a>00724          <a class="code" href="a00028.html#44de4bc08663fbddbd11946bbb06e2ce" title="This function writes a byte in the file.">file_putc</a>(<span class="charliteral">'\n'</span>);
<a name="l00725"></a>00725       }
<a name="l00726"></a>00726       file_string_ascii();
<a name="l00727"></a>00727 <span class="preprocessor">#else</span>
<a name="l00728"></a>00728 <span class="preprocessor"></span>      <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 1, <a class="code" href="a00029.html#ea9734cc236a73aefd3b35444d08d39d" title="start at the end of file and rewind">FS_SEEK_END</a>);
<a name="l00729"></a>00729       <span class="keywordflow">if</span>( <span class="charliteral">'\n'</span> != <a class="code" href="a00028.html#952fd54b2e49943d138e44d3bdf569bf" title="This function returns the next byte of file.">file_getc</a>())
<a name="l00730"></a>00730       {
<a name="l00731"></a>00731          <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 1, <a class="code" href="a00029.html#ea9734cc236a73aefd3b35444d08d39d" title="start at the end of file and rewind">FS_SEEK_END</a>);
<a name="l00732"></a>00732          <a class="code" href="a00028.html#44de4bc08663fbddbd11946bbb06e2ce" title="This function writes a byte in the file.">file_putc</a>(<span class="charliteral">'\n'</span>);
<a name="l00733"></a>00733       }
<a name="l00734"></a>00734 <span class="preprocessor">#endif</span>
<a name="l00735"></a>00735 <span class="preprocessor"></span>   }
<a name="l00736"></a>00736    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00737"></a>00737 
<a name="l00738"></a>00738    <span class="comment">// Get path of play list file and check with curent to create a relative path</span>
<a name="l00739"></a>00739 
<a name="l00740"></a>00740    <span class="keywordflow">if</span>( <a class="code" href="a00050.html#2496848c16cf7bd5ce45f402f89a7deb">PL_ADD_FILE</a> == u8_mode )
<a name="l00741"></a>00741       <span class="keywordflow">goto</span> pl_add_file;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743    <span class="comment">// Add all files valid in current dir</span>
<a name="l00744"></a>00744    u8_folder_level = 0;
<a name="l00745"></a>00745    <a class="code" href="a00047.html#7ad0aa092d133a156651abe5d871b8eb" title="This function resets the selection pointer, so &amp;quot;no file selected&amp;quot; in file...">nav_filelist_reset</a>();
<a name="l00746"></a>00746    <span class="keywordflow">while</span>(1)
<a name="l00747"></a>00747    {
<a name="l00748"></a>00748       <span class="keywordflow">while</span>(1)
<a name="l00749"></a>00749       {
<a name="l00750"></a>00750          <span class="keywordflow">if</span>( <a class="code" href="a00047.html#066eaff61613f07dc5fb1f3313747aef" title="This function moves the selection pointer in file list.">nav_filelist_set</a>( 0 , <a class="code" href="a00048.html#793c4ce9436637d68ab25dc859abc35a" title="move in list to next file">FS_FIND_NEXT</a> ) )
<a name="l00751"></a>00751             <span class="keywordflow">break</span>;   <span class="comment">// a next file and directory is found</span>
<a name="l00752"></a>00752          <span class="comment">// No other dir or file in current dir then go to parent dir</span>
<a name="l00753"></a>00753          <span class="keywordflow">if</span>( 0 == u8_folder_level )
<a name="l00754"></a>00754             <span class="keywordflow">goto</span> pl_add_end;  <span class="comment">// end of ADD</span>
<a name="l00755"></a>00755          <span class="comment">// Remark, nav_dir_gotoparent() routine go to in parent dir and select the children dir in list</span>
<a name="l00756"></a>00756          u8_folder_level--;
<a name="l00757"></a>00757          <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#b37aa8fc84aca800a020da78724d729e" title="This function goes to the parent directory.">nav_dir_gotoparent</a>() )
<a name="l00758"></a>00758             <span class="keywordflow">return</span> FALSE;
<a name="l00759"></a>00759       }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761       <span class="keywordflow">if</span>( <a class="code" href="a00047.html#0e9d8d4d0a438b0803c57c775e6c3b9c" title="This function returns the type of selected file.">nav_file_isdir</a>())
<a name="l00762"></a>00762       {
<a name="l00763"></a>00763          <span class="keywordflow">if</span>( <a class="code" href="a00050.html#9c22455714b8b706db12b43f492df53c">PL_ADD_SUBDIR</a> == u8_mode )
<a name="l00764"></a>00764          {  <span class="comment">// Enter in sub dir</span>
<a name="l00765"></a>00765             <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#dca006b356e65cb05459f7bd7917a1ed" title="This function enters in the selected directory in file list.">nav_dir_cd</a>())
<a name="l00766"></a>00766                <span class="keywordflow">return</span> FALSE;
<a name="l00767"></a>00767             u8_folder_level++;
<a name="l00768"></a>00768          }
<a name="l00769"></a>00769       }
<a name="l00770"></a>00770       <span class="keywordflow">else</span>
<a name="l00771"></a>00771       {
<a name="l00772"></a>00772 pl_add_file:
<a name="l00773"></a>00773          <span class="keywordflow">if</span>( <a class="code" href="a00047.html#4a3e65b107c26de2f7ff4fb1d2a854e3" title="This function checks the extension of selected file.">nav_file_checkext</a>( sz_filterext ) )
<a name="l00774"></a>00774          {
<a name="l00775"></a>00775             <span class="comment">// It is a valid file</span>
<a name="l00776"></a>00776             <span class="comment">// Get name of current file</span>
<a name="l00777"></a>00777 <span class="preprocessor">#if( (FS_ASCII == ENABLED) &amp;&amp; (FS_UNICODE == ENABLED) &amp;&amp; (PL_UNICODE == DISABLED) )</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>            <a class="code" href="a00047.html#7489cf6b312750301cb7df5b915b436a" title="This function selects the ASCII mode for all routines with FS_STRING parameter.">nav_string_ascii</a>();
<a name="l00779"></a>00779 <span class="preprocessor">#endif</span>
<a name="l00780"></a>00780 <span class="preprocessor"></span>            <a class="code" href="a00047.html#661d4a0464a9da163de1e07aa9196f0d" title="This function returns the full path of the selection.">nav_getcwd</a>( (<a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>)<a class="code" href="a00021.html#08e2b05f904fab3d8f09f4f24ef214c5" title="Cache to store the path of a file (here, mapped onto a global buffer).">pl_cache_path</a>, <a class="code" href="a00021.html#a16bb33f4d06580450e9141815d35f5f" title="Size of cache to store the path of a file.">PL_CACHE_PATH_MAX_SIZE</a>, TRUE );
<a name="l00781"></a>00781 <span class="preprocessor">#if( (FS_ASCII == ENABLED) &amp;&amp; (FS_UNICODE == ENABLED) &amp;&amp; (PL_UNICODE == DISABLED) )</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span>            <a class="code" href="a00047.html#69ee3def8525352e53819df1f975dd86" title="This function selects the UNICODE mode for all routines with FS_STRING parameter...">nav_string_unicode</a>();
<a name="l00783"></a>00783 <span class="preprocessor">#endif</span>
<a name="l00784"></a>00784 <span class="preprocessor"></span>            <span class="comment">// Write path in file list</span>
<a name="l00785"></a>00785             <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00786"></a>00786 <span class="preprocessor">#if( PL_UNICODE == ENABLED)</span>
<a name="l00787"></a>00787 <span class="preprocessor"></span>            file_string_unicode();
<a name="l00788"></a>00788 <span class="preprocessor">#endif</span>
<a name="l00789"></a>00789 <span class="preprocessor"></span>            <span class="keywordflow">if</span>( file_puts(<a class="code" href="a00021.html#08e2b05f904fab3d8f09f4f24ef214c5" title="Cache to store the path of a file (here, mapped onto a global buffer).">pl_cache_path</a>))
<a name="l00790"></a>00790                <a class="code" href="a00028.html#44de4bc08663fbddbd11946bbb06e2ce" title="This function writes a byte in the file.">file_putc</a>(<span class="charliteral">'\n'</span>);
<a name="l00791"></a>00791 <span class="preprocessor">#if( PL_UNICODE == ENABLED)</span>
<a name="l00792"></a>00792 <span class="preprocessor"></span>            file_string_ascii();
<a name="l00793"></a>00793 <span class="preprocessor">#endif</span>
<a name="l00794"></a>00794 <span class="preprocessor"></span>            <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00795"></a>00795             <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a>++;
<a name="l00796"></a>00796          }
<a name="l00797"></a>00797          <span class="keywordflow">if</span>( <a class="code" href="a00050.html#2496848c16cf7bd5ce45f402f89a7deb">PL_ADD_FILE</a> == u8_mode )
<a name="l00798"></a>00798             <span class="keywordflow">goto</span> pl_add_end;
<a name="l00799"></a>00799       } <span class="comment">// if dir OR file</span>
<a name="l00800"></a>00800    } <span class="comment">// end of first while(1)</span>
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 pl_add_end:
<a name="l00803"></a>00803    <span class="comment">// Go to beginning of file AND no file selected</span>
<a name="l00804"></a>00804    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00805"></a>00805    <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 0 , <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a> );
<a name="l00806"></a>00806    <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> = 0;
<a name="l00807"></a>00807    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00808"></a>00808    <span class="keywordflow">return</span> TRUE;
<a name="l00809"></a>00809 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="731915be2d7a8637628d7c7de0976a58"></a><!-- doxytag: member="play_list.c::pl_main_close" ref="731915be2d7a8637628d7c7de0976a58" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_close           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function closes the play list and selects this one in current navigator. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00277">277</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00094">copyfile_index</a>, <a class="el" href="a00075.html#l00747">file_close()</a>, <a class="el" href="a00078.html#l00084">FS_NAME_GET</a>, <a class="el" href="a00072.html#l00092">Is_unicode</a>, <a class="el" href="a00094.html#l02016">nav_file_del()</a>, <a class="el" href="a00094.html#l01769">nav_file_name()</a>, <a class="el" href="a00094.html#l02096">nav_file_rename()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l01093">nav_getindex()</a>, <a class="el" href="a00094.html#l01120">nav_gotoindex()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00094.html#l00122">nav_string_length_disable()</a>, <a class="el" href="a00094.html#l00111">nav_string_length_enable()</a>, <a class="el" href="a00096.html#l00091">pl_g_list_is_modify</a>, <a class="el" href="a00096.html#l00085">pl_g_list_is_open</a>, <a class="el" href="a00096.html#l00093">pl_g_list_undo</a>, and <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>.</p>

<p>Referenced by <a class="el" href="a00086.html#l00516">navauto_close()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00278"></a>00278 {
<a name="l00279"></a>00279    _MEM_TYPE_SLOW_ <a class="code" href="a00008.html">Fs_index</a> index;
<a name="l00280"></a>00280    U8 nav_id_save;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>() )
<a name="l00283"></a>00283       <span class="keywordflow">return</span> FALSE;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285    <span class="comment">// Close play list</span>
<a name="l00286"></a>00286    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00287"></a>00287    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00288"></a>00288    <a class="code" href="a00028.html#7f4f3b65455595cb5be0f7cd7d12e02d" title="This function closes the file.">file_close</a>();
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="preprocessor">#if( PL_READONLY == DISABLED )</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> )
<a name="l00292"></a>00292    {
<a name="l00293"></a>00293       <span class="keywordflow">if</span>( <a class="code" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce" title="If TRUE then authorize to copy the play list file in case of an undo on modifications...">pl_g_list_undo</a> )
<a name="l00294"></a>00294       {
<a name="l00295"></a>00295          U16 size_name;
<a name="l00296"></a>00296          <a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> sz_name;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298          <span class="comment">//** Play list modified but not saved, then restore previous list</span>
<a name="l00299"></a>00299          <span class="comment">// Get name of play list</span>
<a name="l00300"></a>00300          <a class="code" href="a00047.html#3793ff44e6ad17641ecb8903115bd683" title="This function selects the LENGTH string mode for all routines with FS_STRING parameter...">nav_string_length_enable</a>();
<a name="l00301"></a>00301          <a class="code" href="a00047.html#10603c2fe89bd66a17cfe3bb49a3fa14" title="This function returns the name of selected file or checks the string with the name...">nav_file_name</a>( (<a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>)&amp;size_name, 1, <a class="code" href="a00031.html#a07ca9c4f511c7e1f326c27aeecb7178">FS_NAME_GET</a>, FALSE );
<a name="l00302"></a>00302          <a class="code" href="a00047.html#1f44afef13599e2e881e601e36f66d18" title="This function deselects the LENGTH string mode for all routines with FS_STRING parameter...">nav_string_length_disable</a>();
<a name="l00303"></a>00303          sz_name = PLAYLIST_BUF_ALLOC( size_name* (<a class="code" href="a00025.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>? 2 : 1 ) );
<a name="l00304"></a>00304          <span class="keywordflow">if</span>( NULL != sz_name )
<a name="l00305"></a>00305          {
<a name="l00306"></a>00306             <span class="keywordflow">if</span>( <a class="code" href="a00047.html#10603c2fe89bd66a17cfe3bb49a3fa14" title="This function returns the name of selected file or checks the string with the name...">nav_file_name</a>( sz_name, size_name, <a class="code" href="a00031.html#a07ca9c4f511c7e1f326c27aeecb7178">FS_NAME_GET</a>, FALSE ) )
<a name="l00307"></a>00307             {
<a name="l00308"></a>00308                <span class="comment">// Delete current play list</span>
<a name="l00309"></a>00309                <span class="keywordflow">if</span>( <a class="code" href="a00047.html#8cf46891df029a9f3b62503d2c3cc065" title="This function deletes the selected file or directory.">nav_file_del</a>( TRUE ) )             <span class="comment">// Remove copy file</span>
<a name="l00310"></a>00310                {
<a name="l00311"></a>00311                   <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;<a class="code" href="a00049.html#a351d7cd2bb575811ad1be1b9509cef1" title="File system index on the copy file of play list file (undo option must be ENABLE)...">copyfile_index</a> );   <span class="comment">// Select copy play list</span>
<a name="l00312"></a>00312                   <a class="code" href="a00047.html#db4a11790eddec97933f80ea44dbefa8" title="This function renames the selected directory or file.">nav_file_rename</a>( sz_name );         <span class="comment">// rename copy play list</span>
<a name="l00313"></a>00313                }
<a name="l00314"></a>00314             }
<a name="l00315"></a>00315             PLAYLIST_BUF_FREE( sz_name );
<a name="l00316"></a>00316          }
<a name="l00317"></a>00317       }
<a name="l00318"></a>00318    }
<a name="l00319"></a>00319 <span class="preprocessor">#endif</span>
<a name="l00320"></a>00320 <span class="preprocessor"></span>
<a name="l00321"></a>00321    <span class="comment">// Select the play list file in current navigator</span>
<a name="l00322"></a>00322    index = <a class="code" href="a00047.html#47882923fca657fb23001d23b6b5369d" title="This function returns a small index on the selected file.">nav_getindex</a>();       <span class="comment">// Save a pointer on play list file</span>
<a name="l00323"></a>00323    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00324"></a>00324    <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;index );
<a name="l00325"></a>00325    <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a> = FALSE;
<a name="l00326"></a>00326    <span class="keywordflow">return</span> TRUE;
<a name="l00327"></a>00327 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c17b4ba78b0f72b5a27a5b9170b8b99a"></a><!-- doxytag: member="play_list.c::pl_main_ismodify" ref="c17b4ba78b0f72b5a27a5b9170b8b99a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_ismodify           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks if the play list file is modified. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE the play list file is modified </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00121">121</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00091">pl_g_list_is_modify</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 {
<a name="l00123"></a>00123 <span class="preprocessor">#if( PL_READONLY == DISABLED )</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>   <span class="keywordflow">return</span> <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a>;
<a name="l00125"></a>00125 <span class="preprocessor">#else</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>   <span class="keywordflow">return</span> FALSE;
<a name="l00127"></a>00127 <span class="preprocessor">#endif</span>
<a name="l00128"></a>00128 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9dfed43a52815cf4c80eaaeee7b3f06b"></a><!-- doxytag: member="play_list.c::pl_main_isopen" ref="9dfed43a52815cf4c80eaaeee7b3f06b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_isopen           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks if a play list file is already opened. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE a play list file is opened </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00110">110</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00078.html#l00235">FS_ERR_PL_NOT_OPEN</a>, <a class="el" href="a00078.html#l00256">fs_g_status</a>, and <a class="el" href="a00096.html#l00085">pl_g_list_is_open</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00277">pl_main_close()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00140">pl_main_new()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, <a class="el" href="a00096.html#l00236">pl_main_save()</a>, and <a class="el" href="a00096.html#l00679">pl_sel_isvalid()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00111"></a>00111 {
<a name="l00112"></a>00112    <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00031.html#2608de0a1dd13c482d1fb2179a8e8570" title="The play list isn&amp;#39;t opened.">FS_ERR_PL_NOT_OPEN</a>;
<a name="l00113"></a>00113    <span class="keywordflow">return</span> <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a>;
<a name="l00114"></a>00114 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="91909ac1c0efb364b14637df0dc516fa"></a><!-- doxytag: member="play_list.c::pl_main_modify" ref="91909ac1c0efb364b14637df0dc516fa" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_modify           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function creates a copy of the play list in case of a restore action. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00336">336</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00078.html#l00102">COPY_BUSY</a>, <a class="el" href="a00078.html#l00104">COPY_FINISH</a>, <a class="el" href="a00096.html#l00094">copyfile_index</a>, <a class="el" href="a00075.html#l00747">file_close()</a>, <a class="el" href="a00078.html#l00231">FS_ERR_FILE_EXIST</a>, <a class="el" href="a00078.html#l00240">FS_ERR_PL_READ_ONLY</a>, <a class="el" href="a00078.html#l00256">fs_g_status</a>, <a class="el" href="a00094.html#l02191">nav_file_copy()</a>, <a class="el" href="a00094.html#l02016">nav_file_del()</a>, <a class="el" href="a00094.html#l02215">nav_file_paste_start()</a>, <a class="el" href="a00094.html#l02263">nav_file_paste_state()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l01093">nav_getindex()</a>, <a class="el" href="a00094.html#l01120">nav_gotoindex()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00094.html#l00098">nav_string_ascii()</a>, <a class="el" href="a00094.html#l00087">nav_string_unicode()</a>, <a class="el" href="a00096.html#l00091">pl_g_list_is_modify</a>, <a class="el" href="a00096.html#l00085">pl_g_list_is_open</a>, <a class="el" href="a00096.html#l00092">pl_g_list_is_readonly</a>, <a class="el" href="a00096.html#l00093">pl_g_list_undo</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00705">pl_add()</a>, <a class="el" href="a00096.html#l00845">pl_rem_sel()</a>, and <a class="el" href="a00096.html#l00822">pl_rem_sel_all()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00337"></a>00337 {
<a name="l00338"></a>00338    _MEM_TYPE_SLOW_ U8 name_copyfile[]=<span class="stringliteral">"~copy.m3u"</span>;
<a name="l00339"></a>00339    _MEM_TYPE_SLOW_ <a class="code" href="a00008.html">Fs_index</a> index;
<a name="l00340"></a>00340    U8 nav_id_save;
<a name="l00341"></a>00341    U16 u16_pos;
<a name="l00342"></a>00342    U8 status;
<a name="l00343"></a>00343    Bool b_copy_finish = FALSE;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>() )
<a name="l00346"></a>00346       <span class="keywordflow">return</span> FALSE;
<a name="l00347"></a>00347    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> )
<a name="l00348"></a>00348       <span class="keywordflow">return</span> TRUE;
<a name="l00349"></a>00349    <span class="comment">// If an error occurs during copy process then the play list file is set in read only mode</span>
<a name="l00350"></a>00350    <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00031.html#cfc23d6e284392ade8af2e2158c60652" title="Impossible to modify the play list.">FS_ERR_PL_READ_ONLY</a>;
<a name="l00351"></a>00351    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#d94e57810cfe431db7a638d79b188a7b" title="If FALSE then the play list modification is autorized.">pl_g_list_is_readonly</a> )
<a name="l00352"></a>00352       <span class="keywordflow">return</span> FALSE;
<a name="l00353"></a>00353    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce" title="If TRUE then authorize to copy the play list file in case of an undo on modifications...">pl_g_list_undo</a> )
<a name="l00354"></a>00354    {
<a name="l00355"></a>00355       <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> = TRUE;
<a name="l00356"></a>00356       <span class="keywordflow">return</span> TRUE;
<a name="l00357"></a>00357    }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359    <span class="comment">// Save information about current play list file</span>
<a name="l00360"></a>00360    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00361"></a>00361    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00362"></a>00362    u16_pos = <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>;           <span class="comment">// Save position in play list</span>
<a name="l00363"></a>00363    <a class="code" href="a00028.html#7f4f3b65455595cb5be0f7cd7d12e02d" title="This function closes the file.">file_close</a>();                          <span class="comment">// Close list</span>
<a name="l00364"></a>00364    <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a> = FALSE;
<a name="l00365"></a>00365    index = <a class="code" href="a00047.html#47882923fca657fb23001d23b6b5369d" title="This function returns a small index on the selected file.">nav_getindex</a>();                <span class="comment">// Get pointer on play list</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367    <span class="comment">// Copy play list file in a temporary file</span>
<a name="l00368"></a>00368 <span class="preprocessor">#if( (FS_ASCII == ENABLED) &amp;&amp; (FS_UNICODE == ENABLED) )</span>
<a name="l00369"></a>00369 <span class="preprocessor"></span>   <a class="code" href="a00047.html#7489cf6b312750301cb7df5b915b436a" title="This function selects the ASCII mode for all routines with FS_STRING parameter.">nav_string_ascii</a>();                    <span class="comment">// copy file name stored in ASCII</span>
<a name="l00370"></a>00370 <span class="preprocessor">#endif</span>
<a name="l00371"></a>00371 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#13a6b054cd7e59bd3e916702f35f7dde" title="This function updates the COPY navigator with the selected file.">nav_file_copy</a>())
<a name="l00372"></a>00372       <span class="keywordflow">goto</span> pl_main_modify_end;
<a name="l00373"></a>00373    <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#b55eb40d89b96055f71e71533380fdd0" title="This function pastes the selected file in COPY navigator in the file list of the...">nav_file_paste_start</a>( name_copyfile ) )
<a name="l00374"></a>00374    {
<a name="l00375"></a>00375       <span class="keywordflow">if</span>( <a class="code" href="a00031.html#620feae4af460b0f591356b6408e7b45" title="The file is already existed.">FS_ERR_FILE_EXIST</a> != <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a>)
<a name="l00376"></a>00376          <span class="keywordflow">goto</span> pl_main_modify_end;
<a name="l00377"></a>00377       <span class="comment">// File exist then delete</span>
<a name="l00378"></a>00378       <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#8cf46891df029a9f3b62503d2c3cc065" title="This function deletes the selected file or directory.">nav_file_del</a>(TRUE) )
<a name="l00379"></a>00379          <span class="keywordflow">goto</span> pl_main_modify_end;
<a name="l00380"></a>00380       <span class="comment">// Retry paste</span>
<a name="l00381"></a>00381       <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#b55eb40d89b96055f71e71533380fdd0" title="This function pastes the selected file in COPY navigator in the file list of the...">nav_file_paste_start</a>( name_copyfile ) )
<a name="l00382"></a>00382          <span class="keywordflow">goto</span> pl_main_modify_end;
<a name="l00383"></a>00383    }
<a name="l00384"></a>00384    <span class="comment">// Run paste</span>
<a name="l00385"></a>00385    <span class="keywordflow">do</span>{
<a name="l00386"></a>00386       status = <a class="code" href="a00047.html#c3bfe1b329ff30efaaad183cffa49f03" title="This function executes the copy file.">nav_file_paste_state</a>(FALSE);  <span class="comment">// Copy running</span>
<a name="l00387"></a>00387    }<span class="keywordflow">while</span>( <a class="code" href="a00031.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a> == status );
<a name="l00388"></a>00388    <span class="keywordflow">if</span>( <a class="code" href="a00031.html#49311dbf1b3e2f5d778938655895b17a">COPY_FINISH</a> != status )
<a name="l00389"></a>00389       <span class="keywordflow">goto</span> pl_main_modify_end;
<a name="l00390"></a>00390    <span class="comment">// Save pointer on copy file</span>
<a name="l00391"></a>00391    <a class="code" href="a00049.html#a351d7cd2bb575811ad1be1b9509cef1" title="File system index on the copy file of play list file (undo option must be ENABLE)...">copyfile_index</a> = <a class="code" href="a00047.html#47882923fca657fb23001d23b6b5369d" title="This function returns a small index on the selected file.">nav_getindex</a>();
<a name="l00392"></a>00392    b_copy_finish = TRUE;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 pl_main_modify_end:
<a name="l00395"></a>00395    <span class="comment">// Restore the play list file</span>
<a name="l00396"></a>00396 <span class="preprocessor">#if( (FS_ASCII == ENABLED) &amp;&amp; (FS_UNICODE == ENABLED) )</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span>   <a class="code" href="a00047.html#69ee3def8525352e53819df1f975dd86" title="This function selects the UNICODE mode for all routines with FS_STRING parameter...">nav_string_unicode</a>();
<a name="l00398"></a>00398 <span class="preprocessor">#endif</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>   <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;index );               <span class="comment">// Go to original play list file</span>
<a name="l00400"></a>00400    <a class="code" href="a00049.html#2d95d9d024a3e2055cebd7879eed875f" title="This function opens the current selected file in the current navigator.">pl_main_open</a>( TRUE );                  <span class="comment">// Re open play list file</span>
<a name="l00401"></a>00401    <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> = b_copy_finish;
<a name="l00402"></a>00402    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00403"></a>00403    <a class="code" href="a00049.html#6762440ecae73bb09b47f5c6eadf41bf" title="This function goes to a position in the play list.">pl_nav_setpos</a>(u16_pos);                <span class="comment">// Restort position in play list</span>
<a name="l00404"></a>00404    <span class="keywordflow">return</span> <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a>;
<a name="l00405"></a>00405 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="28596b7211516825f03e2b6528b8c982"></a><!-- doxytag: member="play_list.c::pl_main_new" ref="28596b7211516825f03e2b6528b8c982" args="(const FS_STRING sz_name, Bool b_undo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_new           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_undo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function creates a new empty play list file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>contains the file name (ASCII or UNICODE ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_undo</em>&nbsp;</td><td>TRUE to autorize the undo feature</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00140">140</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, <a class="el" href="a00098.html#l00271">reader_txt_close()</a>, <a class="el" href="a00098.html#l00082">reader_txt_new()</a>, and <a class="el" href="a00101.html#l00057">UNI_TYPE_UTF16BE</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00141"></a>00141 {
<a name="l00142"></a>00142    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>() )
<a name="l00143"></a>00143       <span class="keywordflow">return</span> FALSE;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145    <span class="comment">// Create an empty text file</span>
<a name="l00146"></a>00146    <span class="keywordflow">if</span>( !<a class="code" href="a00051.html#ef8e9a323aab9e3c839130f47a79453a" title="Create a new text file.">reader_txt_new</a>( sz_name, <a class="code" href="a00054.html#06075fdf01ba0cb5926bfe54e1bfc91e">UNI_TYPE_UTF16BE</a> ))
<a name="l00147"></a>00147       <span class="keywordflow">return</span> FALSE;
<a name="l00148"></a>00148    <a class="code" href="a00051.html#1859333aec56b71c6126da66452231c1" title="Close text file.">reader_txt_close</a>();
<a name="l00149"></a>00149 
<a name="l00150"></a>00150    <span class="comment">// Load the play list file</span>
<a name="l00151"></a>00151    <span class="keywordflow">return</span> <a class="code" href="a00049.html#2d95d9d024a3e2055cebd7879eed875f" title="This function opens the current selected file in the current navigator.">pl_main_open</a>( b_undo );
<a name="l00152"></a>00152 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2d95d9d024a3e2055cebd7879eed875f"></a><!-- doxytag: member="play_list.c::pl_main_open" ref="2d95d9d024a3e2055cebd7879eed875f" args="(Bool b_undo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_open           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_undo</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function opens the current selected file in the current navigator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_undo</em>&nbsp;</td><td>TRUE to autorize the undo feature</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00163">163</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00079">E_PL_M3U</a>, <a class="el" href="a00096.html#l00080">E_PL_PLS</a>, <a class="el" href="a00096.html#l00081">E_PL_SMP</a>, <a class="el" href="a00075.html#l00726">file_eof()</a>, <a class="el" href="a00094.html#l00281">nav_copy()</a>, <a class="el" href="a00094.html#l01905">nav_file_checkext()</a>, <a class="el" href="a00094.html#l01877">nav_file_isreadonly()</a>, <a class="el" href="a00094.html#l00676">nav_filelist_reset()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00091">pl_g_list_is_modify</a>, <a class="el" href="a00096.html#l00085">pl_g_list_is_open</a>, <a class="el" href="a00096.html#l00092">pl_g_list_is_readonly</a>, <a class="el" href="a00096.html#l00086">pl_g_list_type</a>, <a class="el" href="a00096.html#l00093">pl_g_list_undo</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>, <a class="el" href="a00096.html#l00577">pl_main_readline()</a>, <a class="el" href="a00097.html#l00166">PL_MAIN_READLINE_OPT_CHECKLINE</a>, <a class="el" href="a00098.html#l00103">reader_txt_beg()</a>, and <a class="el" href="a00098.html#l00065">reader_txt_open()</a>.</p>

<p>Referenced by <a class="el" href="a00086.html#l00315">navauto_open()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00140">pl_main_new()</a>, and <a class="el" href="a00096.html#l00236">pl_main_save()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00164"></a>00164 {
<a name="l00165"></a>00165    U8 nav_id_save;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>() )
<a name="l00168"></a>00168       <span class="keywordflow">return</span> FALSE;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170    <span class="comment">// Select the play list file in "play list" navigator</span>
<a name="l00171"></a>00171    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();            <span class="comment">// Save current navigator</span>
<a name="l00172"></a>00172    <a class="code" href="a00047.html#3b58f8c4afeb6714cd2c7eb61058da0d" title="This function copys the navigator information to another navigator.">nav_copy</a>( FS_NAV_ID_PLAYLIST );
<a name="l00173"></a>00173    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00174"></a>00174 
<a name="l00175"></a>00175    <span class="comment">// Make sure the selected file is a playlist</span>
<a name="l00176"></a>00176    <span class="keywordflow">if</span>( <a class="code" href="a00047.html#4a3e65b107c26de2f7ff4fb1d2a854e3" title="This function checks the extension of selected file.">nav_file_checkext</a>(<span class="stringliteral">"m3u"</span>) )
<a name="l00177"></a>00177    {
<a name="l00178"></a>00178       <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a> = <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681">E_PL_M3U</a>;
<a name="l00179"></a>00179    }<span class="keywordflow">else</span>
<a name="l00180"></a>00180    <span class="keywordflow">if</span>( <a class="code" href="a00047.html#4a3e65b107c26de2f7ff4fb1d2a854e3" title="This function checks the extension of selected file.">nav_file_checkext</a>(<span class="stringliteral">"pls"</span>) )
<a name="l00181"></a>00181    {
<a name="l00182"></a>00182       <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a> = <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751">E_PL_PLS</a>;
<a name="l00183"></a>00183    }<span class="keywordflow">else</span>
<a name="l00184"></a>00184    <span class="keywordflow">if</span>( <a class="code" href="a00047.html#4a3e65b107c26de2f7ff4fb1d2a854e3" title="This function checks the extension of selected file.">nav_file_checkext</a>(<span class="stringliteral">"smp"</span>) )
<a name="l00185"></a>00185    {
<a name="l00186"></a>00186       <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a> = <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd">E_PL_SMP</a>;
<a name="l00187"></a>00187    }<span class="keywordflow">else</span>
<a name="l00188"></a>00188       <span class="keywordflow">goto</span> pl_main_open_end;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190    <span class="comment">// Open list</span>
<a name="l00191"></a>00191 <span class="preprocessor">#if( PL_READONLY == DISABLED )</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>   <a class="code" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce" title="If TRUE then authorize to copy the play list file in case of an undo on modifications...">pl_g_list_undo</a>          = b_undo;
<a name="l00193"></a>00193    <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a>     = FALSE;
<a name="l00194"></a>00194    <a class="code" href="a00049.html#d94e57810cfe431db7a638d79b188a7b" title="If FALSE then the play list modification is autorized.">pl_g_list_is_readonly</a>   = <a class="code" href="a00047.html#414f55acdda5d91d87d0959155c4e615" title="This function checks the write protection of disk and the attribut &amp;quot;read only&amp;quot;...">nav_file_isreadonly</a>();
<a name="l00195"></a>00195    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#d94e57810cfe431db7a638d79b188a7b" title="If FALSE then the play list modification is autorized.">pl_g_list_is_readonly</a> )
<a name="l00196"></a>00196    {
<a name="l00197"></a>00197       <span class="keywordflow">if</span>( !<a class="code" href="a00051.html#ee4bf4e140c9a4893547bf41459e57f3" title="Open a selected text file in the current navigator.">reader_txt_open</a>( TRUE ))
<a name="l00198"></a>00198          <span class="keywordflow">goto</span> pl_main_open_end;
<a name="l00199"></a>00199    }<span class="keywordflow">else</span>{
<a name="l00200"></a>00200       <span class="keywordflow">if</span>( !<a class="code" href="a00051.html#ee4bf4e140c9a4893547bf41459e57f3" title="Open a selected text file in the current navigator.">reader_txt_open</a>( FALSE ))
<a name="l00201"></a>00201          <span class="keywordflow">goto</span> pl_main_open_end;
<a name="l00202"></a>00202    }
<a name="l00203"></a>00203 <span class="preprocessor">#else</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( !<a class="code" href="a00051.html#ee4bf4e140c9a4893547bf41459e57f3" title="Open a selected text file in the current navigator.">reader_txt_open</a>( TRUE ))
<a name="l00205"></a>00205        <span class="keywordflow">goto</span> pl_main_open_end;
<a name="l00206"></a>00206 <span class="preprocessor">#endif</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span>
<a name="l00208"></a>00208    <span class="comment">// Compute the number of file in list</span>
<a name="l00209"></a>00209    <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a>    = 0;
<a name="l00210"></a>00210    <span class="keywordflow">while</span>( 0 == <a class="code" href="a00028.html#bed52ba7230c6eecf100a3709b9ed74e" title="This function checks the end of file.">file_eof</a>() )
<a name="l00211"></a>00211    {
<a name="l00212"></a>00212       <span class="keywordflow">if</span>( <a class="code" href="a00049.html#f01e79587fade6bdd9afc994843d364c" title="This function reads and checks the next line.">pl_main_readline</a>(<a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f02472a994994b0c26b1fcebc9e2b06032">PL_MAIN_READLINE_OPT_CHECKLINE</a>,0,NULL,NULL) )
<a name="l00213"></a>00213          <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a>++;   <span class="comment">// Add a file</span>
<a name="l00214"></a>00214    }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216    <span class="comment">// Go to at the beginning of text file</span>
<a name="l00217"></a>00217    <a class="code" href="a00051.html#4f6bbd93a0b11365b77518a22b1ae098" title="This function goes at the beginning of file and read the text header.">reader_txt_beg</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219    <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>    = 0;     <span class="comment">// Don't select a file</span>
<a name="l00220"></a>00220    <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a>    = TRUE;  <span class="comment">// Play list file is opened</span>
<a name="l00221"></a>00221    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );    <span class="comment">// Re select the previous navigator</span>
<a name="l00222"></a>00222    <a class="code" href="a00047.html#7ad0aa092d133a156651abe5d871b8eb" title="This function resets the selection pointer, so &amp;quot;no file selected&amp;quot; in file...">nav_filelist_reset</a>();
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 pl_main_open_end:
<a name="l00225"></a>00225    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );    <span class="comment">// Re select the previous navigator</span>
<a name="l00226"></a>00226    <span class="keywordflow">return</span> <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a>;
<a name="l00227"></a>00227 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f01e79587fade6bdd9afc994843d364c"></a><!-- doxytag: member="play_list.c::pl_main_readline" ref="f01e79587fade6bdd9afc994843d364c" args="(readline_opt_t opt, U8 id_nav, FS_STRING *sz_path, U16 *u16_size_line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_readline           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f0">readline_opt_t</a>&nbsp;</td>
          <td class="paramname"> <em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>id_nav</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> *&nbsp;</td>
          <td class="paramname"> <em>sz_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16 *&nbsp;</td>
          <td class="paramname"> <em>u16_size_line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function reads and checks the next line. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>opt</em>&nbsp;</td><td>PL_MAIN_READLINE_OPT_CHECKLINE to check the next line in the file.<br>
 PL_MAIN_READLINE_OPT_READSTRING to read the string in the text file.<br>
 PL_MAIN_READLINE_OPT_GOTOPATH to read, chack and goto the path. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id_nav</em>&nbsp;</td><td>ID navigator to update with the selected file (ignore if b_gotopatch == FALSE) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_path</em>&nbsp;</td><td>Address of the string returned. It is used only if PL_MAIN_READLINE_OPT_READSTRING or PL_MAIN_READLINE_OPT_GOTOPATH options are specified. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u16_size_line</em>&nbsp;</td><td>The length of the path. If this parameter is NULL, then the lenght is not returned.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a line with a correct path FALSE line ignored or end of file </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00577">577</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00079">E_PL_M3U</a>, <a class="el" href="a00096.html#l00080">E_PL_PLS</a>, <a class="el" href="a00096.html#l00081">E_PL_SMP</a>, <a class="el" href="a00075.html#l00632">file_getpos()</a>, <a class="el" href="a00075.html#l00653">file_seek()</a>, <a class="el" href="a00076.html#l00054">FS_SEEK_SET</a>, <a class="el" href="a00068.html#l00068">FS_UNICODE</a>, <a class="el" href="a00072.html#l00092">Is_unicode</a>, <a class="el" href="a00094.html#l00281">nav_copy()</a>, <a class="el" href="a00094.html#l00676">nav_filelist_reset()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00094.html#l01578">nav_setcwd()</a>, <a class="el" href="a00096.html#l00086">pl_g_list_type</a>, <a class="el" href="a00097.html#l00166">PL_MAIN_READLINE_OPT_CHECKLINE</a>, <a class="el" href="a00097.html#l00167">PL_MAIN_READLINE_OPT_READSTRING</a>, and <a class="el" href="a00098.html#l00142">reader_txt_get_line()</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00163">pl_main_open()</a>, <a class="el" href="a00096.html#l00502">pl_nav_readentry()</a>, and <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00578"></a>00578 {
<a name="l00579"></a>00579    U16 line_beg[8];           <span class="comment">// Contains first characters of the line</span>
<a name="l00580"></a>00580    U32 u32_file_pos;
<a name="l00581"></a>00581    U16 u16_alt_length = 0;
<a name="l00582"></a>00582    U8  u8_pos_path_in_line = 0;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584    <span class="comment">// Set output to NULL to specify if there is an error</span>
<a name="l00585"></a>00585    *sz_path = NULL;
<a name="l00586"></a>00586 
<a name="l00587"></a>00587    <span class="comment">// Read the 3 first char in the line</span>
<a name="l00588"></a>00588    u32_file_pos = <a class="code" href="a00028.html#2a08b2cfeeb2b4064f3b2fcd6829c8da" title="This function returns the position in the file.">file_getpos</a>();
<a name="l00589"></a>00589    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef191882c25c5ebd4edbe7e072ab5ac19be681">E_PL_M3U</a> == <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a> )
<a name="l00590"></a>00590    {
<a name="l00591"></a>00591       <span class="comment">// M3U path lines = "path\file"</span>
<a name="l00592"></a>00592       <span class="comment">// M3U comment lines = "#..."</span>
<a name="l00593"></a>00593       u16_alt_length = <a class="code" href="a00051.html#29030022836887d64ee7b516b93f2d4e" title="This function fills an ASCII buffer with the current text line of opened file.">reader_txt_get_line</a>( TRUE, (<a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>)line_beg, 2 );
<a name="l00594"></a>00594       <span class="keywordflow">if</span>( (2 &gt; u16_alt_length)   <span class="comment">// The line size is not correct</span>
<a name="l00595"></a>00595       ||  (<span class="charliteral">'#'</span> == line_beg[0]) ) <span class="comment">// It is a comment line</span>
<a name="l00596"></a>00596       {
<a name="l00597"></a>00597          <span class="keywordflow">return</span> FALSE;
<a name="l00598"></a>00598       }
<a name="l00599"></a>00599       u8_pos_path_in_line=0;
<a name="l00600"></a>00600    }
<a name="l00601"></a>00601    <span class="keywordflow">if</span>( (<a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef19189ff6e70f8e629623469089e5807a6751">E_PL_PLS</a> == <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a>) || (<a class="code" href="a00049.html#0c3455f08337dedcd64aa31097ef1918ca681f93854b4e08980ee12b7ef1abcd">E_PL_SMP</a> == <a class="code" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4" title="Type of the play list.">pl_g_list_type</a>) )
<a name="l00602"></a>00602    {
<a name="l00603"></a>00603       <span class="comment">// PLS path lines = "Filexxx=path\file"</span>
<a name="l00604"></a>00604       <span class="comment">// SMP path lines = "File=path\file"</span>
<a name="l00605"></a>00605       u16_alt_length = <a class="code" href="a00051.html#29030022836887d64ee7b516b93f2d4e" title="This function fills an ASCII buffer with the current text line of opened file.">reader_txt_get_line</a>( TRUE, (<a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>)line_beg, 8 );
<a name="l00606"></a>00606       <span class="keywordflow">if</span>(6 &gt; u16_alt_length)     <span class="comment">// The line size can't containt a path line</span>
<a name="l00607"></a>00607          <span class="keywordflow">return</span> FALSE;
<a name="l00608"></a>00608       <span class="comment">// Check if it is a path line</span>
<a name="l00609"></a>00609       <span class="keywordflow">if</span>( (<span class="charliteral">'F'</span> != line_beg[0])
<a name="l00610"></a>00610       ||  (<span class="charliteral">'i'</span> != line_beg[1])
<a name="l00611"></a>00611       ||  (<span class="charliteral">'l'</span> != line_beg[2])
<a name="l00612"></a>00612       ||  (<span class="charliteral">'e'</span> != line_beg[3]) )
<a name="l00613"></a>00613       {
<a name="l00614"></a>00614          <span class="keywordflow">return</span> FALSE;
<a name="l00615"></a>00615       }
<a name="l00616"></a>00616       u8_pos_path_in_line=5;
<a name="l00617"></a>00617       <span class="keywordflow">if</span>(<span class="charliteral">'='</span> != line_beg[4])
<a name="l00618"></a>00618       {
<a name="l00619"></a>00619          u8_pos_path_in_line++;
<a name="l00620"></a>00620          <span class="keywordflow">if</span>(<span class="charliteral">'='</span> != line_beg[5])
<a name="l00621"></a>00621          {
<a name="l00622"></a>00622             u8_pos_path_in_line++;
<a name="l00623"></a>00623             <span class="keywordflow">if</span>(<span class="charliteral">'='</span> != line_beg[6])
<a name="l00624"></a>00624             {
<a name="l00625"></a>00625                u8_pos_path_in_line++;
<a name="l00626"></a>00626                <span class="keywordflow">if</span>(<span class="charliteral">'='</span> != line_beg[7])
<a name="l00627"></a>00627                   <span class="keywordflow">return</span> FALSE;
<a name="l00628"></a>00628             }
<a name="l00629"></a>00629          }
<a name="l00630"></a>00630       }
<a name="l00631"></a>00631    }
<a name="l00632"></a>00632    <span class="comment">// Here, the line contains a path</span>
<a name="l00633"></a>00633 
<a name="l00634"></a>00634    <span class="comment">// Store the length of the line if a buffer is set</span>
<a name="l00635"></a>00635    <span class="keywordflow">if</span> (u16_size_line)
<a name="l00636"></a>00636      *u16_size_line = u16_alt_length - u8_pos_path_in_line;
<a name="l00637"></a>00637    <span class="keywordflow">if</span> (opt == <a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f02472a994994b0c26b1fcebc9e2b06032">PL_MAIN_READLINE_OPT_CHECKLINE</a>)
<a name="l00638"></a>00638       <span class="keywordflow">return</span> TRUE;
<a name="l00639"></a>00639    <span class="comment">// else go to path</span>
<a name="l00640"></a>00640 
<a name="l00641"></a>00641    <span class="comment">// Read all characters in line</span>
<a name="l00642"></a>00642    <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( u32_file_pos, <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a> );
<a name="l00643"></a>00643    *sz_path = PLAYLIST_BUF_ALLOC( u16_alt_length * (<a class="code" href="a00025.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>? 2 : 1 ) );
<a name="l00644"></a>00644    <span class="keywordflow">if</span>( NULL == *sz_path )
<a name="l00645"></a>00645       <span class="keywordflow">return</span> FALSE;   <span class="comment">// no enought memory, impossible to store the path but path present in line</span>
<a name="l00646"></a>00646    <span class="keywordflow">if</span>( 0 == <a class="code" href="a00051.html#29030022836887d64ee7b516b93f2d4e" title="This function fills an ASCII buffer with the current text line of opened file.">reader_txt_get_line</a>( (<a class="code" href="a00021.html#f09bf00c466c5beea4340e55484677cc">FS_UNICODE</a>==ENABLED), *sz_path, u16_alt_length ) )
<a name="l00647"></a>00647       <span class="keywordflow">return</span> FALSE;  <span class="comment">// Error during the read</span>
<a name="l00648"></a>00648    <span class="keywordflow">if</span>( 0 != u8_pos_path_in_line )
<a name="l00649"></a>00649    {
<a name="l00650"></a>00650       <span class="comment">// Shift the path to the beginning of the buffer</span>
<a name="l00651"></a>00651       memmove(*sz_path, *sz_path + u8_pos_path_in_line * ((<a class="code" href="a00021.html#f09bf00c466c5beea4340e55484677cc">FS_UNICODE</a>==ENABLED) ? 2 : 1),
<a name="l00652"></a>00652               (u16_alt_length - u8_pos_path_in_line) * ((<a class="code" href="a00021.html#f09bf00c466c5beea4340e55484677cc">FS_UNICODE</a>==ENABLED) ? 2 : 1));
<a name="l00653"></a>00653    }
<a name="l00654"></a>00654    <span class="keywordflow">if</span> (opt == <a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f05842e47ee668bd9649d03f32a046c6f1">PL_MAIN_READLINE_OPT_READSTRING</a>)
<a name="l00655"></a>00655      <span class="keywordflow">return</span> TRUE;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657    <span class="comment">// Update the navigator with the path of play list file, because the path is relatif at this one</span>
<a name="l00658"></a>00658    <a class="code" href="a00047.html#3b58f8c4afeb6714cd2c7eb61058da0d" title="This function copys the navigator information to another navigator.">nav_copy</a>( id_nav );
<a name="l00659"></a>00659    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( id_nav );
<a name="l00660"></a>00660    <span class="comment">// Go to the path included in the line</span>
<a name="l00661"></a>00661    <span class="keywordflow">if</span>( !<a class="code" href="a00047.html#3d3f2ed17daf26a7aedc2a561cee2558" title="This function selects a disk position via a path.">nav_setcwd</a>( (<a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a>) *sz_path , FALSE, FALSE ) )
<a name="l00662"></a>00662    {
<a name="l00663"></a>00663       <span class="comment">// path no found then path is dead -&gt; reset list to deselect a file</span>
<a name="l00664"></a>00664       <a class="code" href="a00047.html#7ad0aa092d133a156651abe5d871b8eb" title="This function resets the selection pointer, so &amp;quot;no file selected&amp;quot; in file...">nav_filelist_reset</a>();
<a name="l00665"></a>00665    }
<a name="l00666"></a>00666    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00667"></a>00667 
<a name="l00668"></a>00668    <span class="keywordflow">return</span> TRUE;
<a name="l00669"></a>00669 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f36810c870399b35945b36efd7da532b"></a><!-- doxytag: member="play_list.c::pl_main_save" ref="f36810c870399b35945b36efd7da532b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_main_save           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function saves the play list file. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00236">236</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00094">copyfile_index</a>, <a class="el" href="a00075.html#l00747">file_close()</a>, <a class="el" href="a00094.html#l02016">nav_file_del()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l01093">nav_getindex()</a>, <a class="el" href="a00094.html#l01120">nav_gotoindex()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00091">pl_g_list_is_modify</a>, <a class="el" href="a00096.html#l00085">pl_g_list_is_open</a>, <a class="el" href="a00096.html#l00093">pl_g_list_undo</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00237"></a>00237 {
<a name="l00238"></a>00238    _MEM_TYPE_SLOW_ <a class="code" href="a00008.html">Fs_index</a> index;
<a name="l00239"></a>00239    U8 nav_id_save;
<a name="l00240"></a>00240    U16 u16_pos;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242    <span class="comment">// Check if the play list file is opened and modified</span>
<a name="l00243"></a>00243    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>() )
<a name="l00244"></a>00244       <span class="keywordflow">return</span> FALSE;
<a name="l00245"></a>00245    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> )
<a name="l00246"></a>00246       <span class="keywordflow">return</span> TRUE;
<a name="l00247"></a>00247    <a class="code" href="a00049.html#da525c5a94216aa2c7980ae097424b3d" title="If TRUE then the current play list file is modified but it is not saved.">pl_g_list_is_modify</a> = FALSE;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249    <span class="comment">// Check if a undo file exists</span>
<a name="l00250"></a>00250    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce" title="If TRUE then authorize to copy the play list file in case of an undo on modifications...">pl_g_list_undo</a> )
<a name="l00251"></a>00251       <span class="keywordflow">return</span> TRUE;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253    <span class="comment">// Remove original copy of play list file</span>
<a name="l00254"></a>00254    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00255"></a>00255    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00256"></a>00256    u16_pos = <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>;           <span class="comment">// Save position in play list</span>
<a name="l00257"></a>00257    <a class="code" href="a00028.html#7f4f3b65455595cb5be0f7cd7d12e02d" title="This function closes the file.">file_close</a>();                          <span class="comment">// Close list</span>
<a name="l00258"></a>00258    index = <a class="code" href="a00047.html#47882923fca657fb23001d23b6b5369d" title="This function returns a small index on the selected file.">nav_getindex</a>();                <span class="comment">// Save the pointer on play list file</span>
<a name="l00259"></a>00259    <a class="code" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7" title="play list file is opened">pl_g_list_is_open</a> = FALSE;
<a name="l00260"></a>00260    <span class="keywordflow">if</span>( <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;<a class="code" href="a00049.html#a351d7cd2bb575811ad1be1b9509cef1" title="File system index on the copy file of play list file (undo option must be ENABLE)...">copyfile_index</a> ) ) <span class="comment">// Go to the copy of file</span>
<a name="l00261"></a>00261       <a class="code" href="a00047.html#8cf46891df029a9f3b62503d2c3cc065" title="This function deletes the selected file or directory.">nav_file_del</a>( TRUE );               <span class="comment">// Remove the copy</span>
<a name="l00262"></a>00262    <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;index );               <span class="comment">// Re select play list file</span>
<a name="l00263"></a>00263    <a class="code" href="a00049.html#2d95d9d024a3e2055cebd7879eed875f" title="This function opens the current selected file in the current navigator.">pl_main_open</a>( TRUE );                  <span class="comment">// Re open play list file</span>
<a name="l00264"></a>00264    <a class="code" href="a00049.html#6762440ecae73bb09b47f5c6eadf41bf" title="This function goes to a position in the play list.">pl_nav_setpos</a>(u16_pos);                <span class="comment">// Restort position in play list</span>
<a name="l00265"></a>00265    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00266"></a>00266 
<a name="l00267"></a>00267    <span class="keywordflow">return</span> TRUE;
<a name="l00268"></a>00268 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0350caecfa4644339ab48b935c50a130"></a><!-- doxytag: member="play_list.c::pl_nav_eol" ref="0350caecfa4644339ab48b935c50a130" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_nav_eol           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks the end of the play list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if the position is the last file of the play list </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00435">435</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, and <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00436"></a>00436 {
<a name="l00437"></a>00437    <span class="keywordflow">return</span> (<a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a> == <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>);
<a name="l00438"></a>00438 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ed3d15a8053fda6c27415dc86cd8b4c7"></a><!-- doxytag: member="play_list.c::pl_nav_getnbfile" ref="ed3d15a8053fda6c27415dc86cd8b4c7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 pl_nav_getnbfile           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the number of files in play list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of files in play list </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00416">416</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>.</p>

<p>Referenced by <a class="el" href="a00086.html#l01010">navauto_mov_playlist()</a>, and <a class="el" href="a00086.html#l00315">navauto_open()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00417"></a>00417 {
<a name="l00418"></a>00418   <span class="keywordflow">return</span> <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a>;
<a name="l00419"></a>00419 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c0002b15d45c8e76617857c69611cf72"></a><!-- doxytag: member="play_list.c::pl_nav_getpos" ref="c0002b15d45c8e76617857c69611cf72" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 pl_nav_getpos           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the position in the play list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>position in the play list </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00426">426</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>.</p>

<p>Referenced by <a class="el" href="a00086.html#l01010">navauto_mov_playlist()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00427"></a>00427 {
<a name="l00428"></a>00428    <span class="keywordflow">return</span> <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>;
<a name="l00429"></a>00429 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0702e322eb3f0ab2bb4ac574cb51f31e"></a><!-- doxytag: member="play_list.c::pl_nav_readentry" ref="0702e322eb3f0ab2bb4ac574cb51f31e" args="(U16 u16_position, FS_STRING *sz_path, U16 *u16_size_line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_nav_readentry           </td>
          <td>(</td>
          <td class="paramtype">U16&nbsp;</td>
          <td class="paramname"> <em>u16_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> *&nbsp;</td>
          <td class="paramname"> <em>sz_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16 *&nbsp;</td>
          <td class="paramname"> <em>u16_size_line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function read the playliost's entry at a specific position. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16_position</em>&nbsp;</td><td>Position in play list. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_path</em>&nbsp;</td><td>The address of the string where is stored the information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u16_size_line</em>&nbsp;</td><td>The length of the path. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00096.html#l00502">502</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00075.html#l00726">file_eof()</a>, <a class="el" href="a00075.html#l00632">file_getpos()</a>, <a class="el" href="a00075.html#l00653">file_seek()</a>, <a class="el" href="a00078.html#l00239">FS_ERR_PL_OUT_LST</a>, <a class="el" href="a00078.html#l00256">fs_g_status</a>, <a class="el" href="a00076.html#l00054">FS_SEEK_SET</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, <a class="el" href="a00096.html#l00577">pl_main_readline()</a>, <a class="el" href="a00097.html#l00166">PL_MAIN_READLINE_OPT_CHECKLINE</a>, <a class="el" href="a00097.html#l00168">PL_MAIN_READLINE_OPT_GOTOPATH</a>, and <a class="el" href="a00098.html#l00103">reader_txt_beg()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00503"></a>00503 {
<a name="l00504"></a>00504   U8 nav_id_save;
<a name="l00505"></a>00505   U16 u16_current_pos;
<a name="l00506"></a>00506   U32 u32_file_pos;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508   <span class="comment">// Set output to NULL to specify if there is an error</span>
<a name="l00509"></a>00509   *sz_path = NULL;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <span class="comment">// Position out of range</span>
<a name="l00512"></a>00512   <span class="keywordflow">if</span> ((0 == u16_position)
<a name="l00513"></a>00513    || (<a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a> &lt; u16_position))
<a name="l00514"></a>00514   {
<a name="l00515"></a>00515      <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00031.html#4dc7fa3cedd22ae7885138f8f9a65973" title="You are outside of the play list.">FS_ERR_PL_OUT_LST</a>;
<a name="l00516"></a>00516      <span class="keywordflow">return</span> FALSE;
<a name="l00517"></a>00517   }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   <span class="comment">// Go to play list file navigator</span>
<a name="l00520"></a>00520   nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00521"></a>00521   <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>(FS_NAV_ID_PLAYLIST);
<a name="l00522"></a>00522 
<a name="l00523"></a>00523   <span class="comment">// Save current file position</span>
<a name="l00524"></a>00524   u32_file_pos = <a class="code" href="a00028.html#2a08b2cfeeb2b4064f3b2fcd6829c8da" title="This function returns the position in the file.">file_getpos</a>();
<a name="l00525"></a>00525 
<a name="l00526"></a>00526   <span class="keywordflow">if</span> (<a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> &gt; u16_position)
<a name="l00527"></a>00527   {
<a name="l00528"></a>00528     <span class="comment">// Go to the beginning of the text file</span>
<a name="l00529"></a>00529     <a class="code" href="a00051.html#4f6bbd93a0b11365b77518a22b1ae098" title="This function goes at the beginning of file and read the text header.">reader_txt_beg</a>();
<a name="l00530"></a>00530     u16_current_pos = 0;
<a name="l00531"></a>00531   }
<a name="l00532"></a>00532   <span class="keywordflow">else</span>
<a name="l00533"></a>00533   {
<a name="l00534"></a>00534     u16_current_pos = <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>;
<a name="l00535"></a>00535   }
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   <span class="keywordflow">while</span>(u16_current_pos != u16_position)
<a name="l00538"></a>00538   {
<a name="l00539"></a>00539     <span class="keywordflow">if</span> (<a class="code" href="a00028.html#bed52ba7230c6eecf100a3709b9ed74e" title="This function checks the end of file.">file_eof</a>())
<a name="l00540"></a>00540     {
<a name="l00541"></a>00541       <span class="comment">// Restore file position</span>
<a name="l00542"></a>00542       <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>(u32_file_pos, <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a>);
<a name="l00543"></a>00543       <span class="comment">// Reselect the previous navigator</span>
<a name="l00544"></a>00544       <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>(nav_id_save);
<a name="l00545"></a>00545       <span class="keywordflow">return</span> FALSE;
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547     <span class="keywordflow">if</span> (u16_current_pos+1 == u16_position)
<a name="l00548"></a>00548     {
<a name="l00549"></a>00549       <span class="keywordflow">if</span> (<a class="code" href="a00049.html#f01e79587fade6bdd9afc994843d364c" title="This function reads and checks the next line.">pl_main_readline</a>(<a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f034ea6e58645123ef355dd4177002e268">PL_MAIN_READLINE_OPT_GOTOPATH</a>, nav_id_save, sz_path, u16_size_line))
<a name="l00550"></a>00550         <span class="keywordflow">break</span>;
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00049.html#f01e79587fade6bdd9afc994843d364c" title="This function reads and checks the next line.">pl_main_readline</a>(<a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f02472a994994b0c26b1fcebc9e2b06032">PL_MAIN_READLINE_OPT_CHECKLINE</a>, 0, NULL, NULL))
<a name="l00553"></a>00553       u16_current_pos++; <span class="comment">// Add a file</span>
<a name="l00554"></a>00554   }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556   <span class="comment">// Restore file position</span>
<a name="l00557"></a>00557   <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>(u32_file_pos, <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a>);
<a name="l00558"></a>00558   <span class="comment">// Reselect the previous navigator</span>
<a name="l00559"></a>00559   <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>(nav_id_save);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561   <span class="keywordflow">return</span> TRUE;
<a name="l00562"></a>00562 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6762440ecae73bb09b47f5c6eadf41bf"></a><!-- doxytag: member="play_list.c::pl_nav_setpos" ref="6762440ecae73bb09b47f5c6eadf41bf" args="(U16 u16_position)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_nav_setpos           </td>
          <td>(</td>
          <td class="paramtype">U16&nbsp;</td>
          <td class="paramname"> <em>u16_position</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function goes to a position in the play list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16_position</em>&nbsp;</td><td>position in play list to go </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00096.html#l00444">444</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00075.html#l00726">file_eof()</a>, <a class="el" href="a00078.html#l00239">FS_ERR_PL_OUT_LST</a>, <a class="el" href="a00078.html#l00256">fs_g_status</a>, <a class="el" href="a00094.html#l00676">nav_filelist_reset()</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, <a class="el" href="a00096.html#l00577">pl_main_readline()</a>, <a class="el" href="a00097.html#l00166">PL_MAIN_READLINE_OPT_CHECKLINE</a>, <a class="el" href="a00097.html#l00168">PL_MAIN_READLINE_OPT_GOTOPATH</a>, and <a class="el" href="a00098.html#l00103">reader_txt_beg()</a>.</p>

<p>Referenced by <a class="el" href="a00086.html#l01010">navauto_mov_playlist()</a>, <a class="el" href="a00086.html#l00315">navauto_open()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00236">pl_main_save()</a>, and <a class="el" href="a00096.html#l00893">pl_rem_dead()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00445"></a>00445 {
<a name="l00446"></a>00446    U8 nav_id_save;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448    <span class="keywordflow">if</span>( (0 == u16_position )
<a name="l00449"></a>00449    ||  (<a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a> &lt; u16_position) )
<a name="l00450"></a>00450    {
<a name="l00451"></a>00451       <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00031.html#4dc7fa3cedd22ae7885138f8f9a65973" title="You are outside of the play list.">FS_ERR_PL_OUT_LST</a>;
<a name="l00452"></a>00452       <span class="keywordflow">return</span> FALSE;
<a name="l00453"></a>00453    }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> == u16_position )
<a name="l00456"></a>00456       <span class="keywordflow">return</span> TRUE;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458    <span class="comment">// Reset previous selection</span>
<a name="l00459"></a>00459    <a class="code" href="a00047.html#7ad0aa092d133a156651abe5d871b8eb" title="This function resets the selection pointer, so &amp;quot;no file selected&amp;quot; in file...">nav_filelist_reset</a>();
<a name="l00460"></a>00460 
<a name="l00461"></a>00461    <span class="comment">// Go to play list file navigator</span>
<a name="l00462"></a>00462    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00463"></a>00463    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00464"></a>00464 
<a name="l00465"></a>00465    <span class="keywordflow">if</span>( <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> &gt; u16_position )
<a name="l00466"></a>00466    {
<a name="l00467"></a>00467       <span class="comment">// Go to at the beginning of text file</span>
<a name="l00468"></a>00468       <a class="code" href="a00051.html#4f6bbd93a0b11365b77518a22b1ae098" title="This function goes at the beginning of file and read the text header.">reader_txt_beg</a>();
<a name="l00469"></a>00469       <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>    = 0;
<a name="l00470"></a>00470    }
<a name="l00471"></a>00471    <span class="keywordflow">while</span>( <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> != u16_position )
<a name="l00472"></a>00472    {
<a name="l00473"></a>00473       <a class="code" href="a00031.html#caff53a7315dfcce82e06ae11c771e8c">FS_STRING</a> sz_path;
<a name="l00474"></a>00474       Bool next_pos = FALSE;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476       <span class="keywordflow">if</span>( 0 != <a class="code" href="a00028.html#bed52ba7230c6eecf100a3709b9ed74e" title="This function checks the end of file.">file_eof</a>() )
<a name="l00477"></a>00477       {
<a name="l00478"></a>00478          <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save ); <span class="comment">// Re select the previous navigator</span>
<a name="l00479"></a>00479          <span class="keywordflow">return</span> FALSE;
<a name="l00480"></a>00480       }
<a name="l00481"></a>00481       <span class="keywordflow">if</span> (<a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>+1 == u16_position)
<a name="l00482"></a>00482       {
<a name="l00483"></a>00483         next_pos = <a class="code" href="a00049.html#f01e79587fade6bdd9afc994843d364c" title="This function reads and checks the next line.">pl_main_readline</a>(<a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f034ea6e58645123ef355dd4177002e268">PL_MAIN_READLINE_OPT_GOTOPATH</a>, nav_id_save, &amp;sz_path, NULL);
<a name="l00484"></a>00484         <span class="keywordflow">if</span> (sz_path)
<a name="l00485"></a>00485           PLAYLIST_BUF_FREE(sz_path);
<a name="l00486"></a>00486       }
<a name="l00487"></a>00487       <span class="keywordflow">else</span>
<a name="l00488"></a>00488         next_pos = <a class="code" href="a00049.html#f01e79587fade6bdd9afc994843d364c" title="This function reads and checks the next line.">pl_main_readline</a>(<a class="code" href="a00050.html#96aa34c741e50dd5fb675ccdbac9e8f02472a994994b0c26b1fcebc9e2b06032">PL_MAIN_READLINE_OPT_CHECKLINE</a>, 0, NULL, NULL);
<a name="l00489"></a>00489       <span class="keywordflow">if</span> (next_pos)
<a name="l00490"></a>00490          <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>++; <span class="comment">// Add a file</span>
<a name="l00491"></a>00491    }
<a name="l00492"></a>00492    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save ); <span class="comment">// Re select the previous navigator</span>
<a name="l00493"></a>00493    <span class="keywordflow">return</span> TRUE;
<a name="l00494"></a>00494 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="abfd8b5e7bb120c39ff07e87e84474f6"></a><!-- doxytag: member="play_list.c::pl_rem_dead" ref="abfd8b5e7bb120c39ff07e87e84474f6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_rem_dead           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function remove the dead file in the list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00893">893</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l01120">nav_gotoindex()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>, and <a class="el" href="a00096.html#l00845">pl_rem_sel()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00894"></a>00894 {
<a name="l00895"></a>00895    U8 nav_id_save;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897    <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> = 0;
<a name="l00898"></a>00898 
<a name="l00899"></a>00899    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00900"></a>00900    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00901"></a>00901 
<a name="l00902"></a>00902    <span class="keywordflow">while</span>( <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> &lt; <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a> )
<a name="l00903"></a>00903    {
<a name="l00904"></a>00904       <span class="keywordflow">if</span>( <a class="code" href="a00047.html#503f8d42be2b70cb554589ac7974ed78" title="This function selects a file in the navigator via a file index.">nav_gotoindex</a>( &amp;pl_g_list[ <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> ] ))
<a name="l00905"></a>00905       {
<a name="l00906"></a>00906          <span class="comment">// the file is good -&gt; go to next file in list</span>
<a name="l00907"></a>00907          pl_g_u16_list_sel++;
<a name="l00908"></a>00908          <span class="keywordflow">continue</span>;
<a name="l00909"></a>00909       }
<a name="l00910"></a>00910 
<a name="l00911"></a>00911       <span class="comment">// The file is dead -&gt; remove this one</span>
<a name="l00912"></a>00912       <a class="code" href="a00049.html#8be06ed22f78ede3e41cc52b7ab6b085" title="This function removes the selected file in the list.">pl_rem_sel</a>();
<a name="l00913"></a>00913    }
<a name="l00914"></a>00914    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00915"></a>00915    <a class="code" href="a00049.html#6762440ecae73bb09b47f5c6eadf41bf" title="This function goes to a position in the play list.">pl_nav_setpos</a>(0);
<a name="l00916"></a>00916 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8be06ed22f78ede3e41cc52b7ab6b085"></a><!-- doxytag: member="play_list.c::pl_rem_sel" ref="8be06ed22f78ede3e41cc52b7ab6b085" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_rem_sel           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function removes the selected file in the list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00845">845</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00075.html#l00599">file_putc()</a>, <a class="el" href="a00075.html#l00653">file_seek()</a>, <a class="el" href="a00078.html#l00239">FS_ERR_PL_OUT_LST</a>, <a class="el" href="a00078.html#l00256">fs_g_status</a>, <a class="el" href="a00076.html#l00056">FS_SEEK_CUR_RE</a>, <a class="el" href="a00076.html#l00054">FS_SEEK_SET</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, <a class="el" href="a00096.html#l00087">pl_g_u16_list_size</a>, and <a class="el" href="a00096.html#l00336">pl_main_modify()</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00893">pl_rem_dead()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00846"></a>00846 {
<a name="l00847"></a>00847    U8 nav_id_save;
<a name="l00848"></a>00848    Bool b_status = FALSE;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#91909ac1c0efb364b14637df0dc516fa" title="This function creates a copy of the play list in case of a restore action.">pl_main_modify</a>() )
<a name="l00851"></a>00851       <span class="keywordflow">return</span> FALSE;
<a name="l00852"></a>00852    <span class="keywordflow">if</span>( 0 == <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> )
<a name="l00853"></a>00853    {
<a name="l00854"></a>00854       <a class="code" href="a00031.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00031.html#4dc7fa3cedd22ae7885138f8f9a65973" title="You are outside of the play list.">FS_ERR_PL_OUT_LST</a>;
<a name="l00855"></a>00855       <span class="keywordflow">return</span> FALSE;
<a name="l00856"></a>00856    }
<a name="l00857"></a>00857    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00858"></a>00858    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00859"></a>00859 
<a name="l00860"></a>00860    <span class="comment">// Jump at the beginning of the current path</span>
<a name="l00861"></a>00861 <span class="preprocessor">#if( PL_UNICODE == ENABLED)</span>
<a name="l00862"></a>00862 <span class="preprocessor"></span>   file_string_unicode();
<a name="l00863"></a>00863    <span class="keywordflow">if</span>( !<a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( pl_g_u16_path_size*2 , <a class="code" href="a00029.html#f546c33414158e18f0a25b795f402ccf" title="start at the current position and rewind">FS_SEEK_CUR_RE</a> ))
<a name="l00864"></a>00864       <span class="keywordflow">goto</span> pl_rem_sys_err;
<a name="l00865"></a>00865 <span class="preprocessor">#else</span>
<a name="l00866"></a>00866 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( !<a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( pl_g_u16_path_size , <a class="code" href="a00029.html#f546c33414158e18f0a25b795f402ccf" title="start at the current position and rewind">FS_SEEK_CUR_RE</a> ))
<a name="l00867"></a>00867       <span class="keywordflow">goto</span> pl_rem_sys_err;
<a name="l00868"></a>00868 <span class="preprocessor">#endif</span>
<a name="l00869"></a>00869 <span class="preprocessor"></span>
<a name="l00870"></a>00870    <span class="comment">// Comment the line</span>
<a name="l00871"></a>00871    <span class="keywordflow">if</span>( !<a class="code" href="a00028.html#44de4bc08663fbddbd11946bbb06e2ce" title="This function writes a byte in the file.">file_putc</a>(<span class="charliteral">'#'</span>))
<a name="l00872"></a>00872       <span class="keywordflow">goto</span> pl_rem_sys_err;
<a name="l00873"></a>00873    b_status = TRUE;
<a name="l00874"></a>00874    <a class="code" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0" title="Number of file included in play list.">pl_g_u16_list_size</a>--;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876 pl_rem_sys_err:
<a name="l00877"></a>00877 <span class="preprocessor">#if( PL_UNICODE == ENABLED)</span>
<a name="l00878"></a>00878 <span class="preprocessor"></span>    file_string_ascii();
<a name="l00879"></a>00879 <span class="preprocessor">#endif</span>
<a name="l00880"></a>00880 <span class="preprocessor"></span>   <span class="comment">// Go to beginning of file AND no file selected</span>
<a name="l00881"></a>00881    <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 0 , <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a> );
<a name="l00882"></a>00882    <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a> = 0;
<a name="l00883"></a>00883    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00884"></a>00884    <span class="keywordflow">return</span> b_status;
<a name="l00885"></a>00885 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="740b78bbbd6b515f6aea668466e4b279"></a><!-- doxytag: member="play_list.c::pl_rem_sel_all" ref="740b78bbbd6b515f6aea668466e4b279" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_rem_sel_all           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function removes all files in the list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00822">822</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00075.html#l00653">file_seek()</a>, <a class="el" href="a00075.html#l00460">file_set_eof()</a>, <a class="el" href="a00076.html#l00054">FS_SEEK_SET</a>, <a class="el" href="a00094.html#l00260">nav_get()</a>, <a class="el" href="a00094.html#l00237">nav_select()</a>, and <a class="el" href="a00096.html#l00336">pl_main_modify()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00823"></a>00823 {
<a name="l00824"></a>00824    U8 nav_id_save;
<a name="l00825"></a>00825    Bool b_status;
<a name="l00826"></a>00826 
<a name="l00827"></a>00827    <span class="keywordflow">if</span>( !<a class="code" href="a00049.html#91909ac1c0efb364b14637df0dc516fa" title="This function creates a copy of the play list in case of a restore action.">pl_main_modify</a>() )
<a name="l00828"></a>00828       <span class="keywordflow">return</span> FALSE;
<a name="l00829"></a>00829 
<a name="l00830"></a>00830    nav_id_save = <a class="code" href="a00047.html#4a9efd8a5ff4c599be7994c009f0fb5f" title="This function returns the navigation identifier used.">nav_get</a>();
<a name="l00831"></a>00831    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( FS_NAV_ID_PLAYLIST );
<a name="l00832"></a>00832    <span class="comment">// Go to beginning of file AND set eof to have a size = 0</span>
<a name="l00833"></a>00833    <a class="code" href="a00028.html#2599f935c7e1b69f2650e0943091ddca" title="This function changes the position in the file.">file_seek</a>( 0 , <a class="code" href="a00029.html#5b33d405a458db1db212d345b21454f8" title="start at the beginning">FS_SEEK_SET</a> );
<a name="l00834"></a>00834    b_status = <a class="code" href="a00028.html#07a8faa41a278961fccc5c0793b01ab1" title="This function sets the end of file at the current position.">file_set_eof</a>();
<a name="l00835"></a>00835    <a class="code" href="a00047.html#7fac26539a62daf547b5eb159f6a43d4" title="This function selects the navigation to use.">nav_select</a>( nav_id_save );
<a name="l00836"></a>00836    <span class="keywordflow">return</span> b_status;
<a name="l00837"></a>00837 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bc2272f9c3366519ca4944ea505c0eef"></a><!-- doxytag: member="play_list.c::pl_sel_isvalid" ref="bc2272f9c3366519ca4944ea505c0eef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool pl_sel_isvalid           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function tests the valid path in list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE = path is not valid in list - DEAD </dd></dl>

<p>Definition at line <a class="el" href="a00096.html#l00679">679</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>References <a class="el" href="a00094.html#l00692">nav_filelist_validpos()</a>, <a class="el" href="a00096.html#l00088">pl_g_u16_list_sel</a>, and <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00680"></a>00680 {
<a name="l00681"></a>00681    <span class="keywordflow">if</span>(!<a class="code" href="a00049.html#9dfed43a52815cf4c80eaaeee7b3f06b" title="This function checks if a play list file is already opened.">pl_main_isopen</a>())
<a name="l00682"></a>00682       <span class="keywordflow">return</span> FALSE;
<a name="l00683"></a>00683    <span class="keywordflow">if</span>(0 == <a class="code" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c" title="Current file selected in play list (0= no file selected, 1= first file).">pl_g_u16_list_sel</a>)
<a name="l00684"></a>00684       <span class="keywordflow">return</span> FALSE;
<a name="l00685"></a>00685    <span class="keywordflow">return</span> <a class="code" href="a00047.html#dd6435ba1a2f0a8ddc072883c05a1a64" title="This function checks if a file is selected.">nav_filelist_validpos</a>();
<a name="l00686"></a>00686 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a351d7cd2bb575811ad1be1b9509cef1"></a><!-- doxytag: member="play_list.c::copyfile_index" ref="a351d7cd2bb575811ad1be1b9509cef1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00008.html">Fs_index</a> <a class="el" href="a00049.html#a351d7cd2bb575811ad1be1b9509cef1">copyfile_index</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File system index on the copy file of play list file (undo option must be ENABLE). 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00094">94</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00277">pl_main_close()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, and <a class="el" href="a00096.html#l00236">pl_main_save()</a>.</p>

</div>
</div><p>
<a class="anchor" name="da525c5a94216aa2c7980ae097424b3d"></a><!-- doxytag: member="play_list.c::pl_g_list_is_modify" ref="da525c5a94216aa2c7980ae097424b3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool <a class="el" href="a00049.html#da525c5a94216aa2c7980ae097424b3d">pl_g_list_is_modify</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If TRUE then the current play list file is modified but it is not saved. 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00091">91</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00277">pl_main_close()</a>, <a class="el" href="a00096.html#l00121">pl_main_ismodify()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00236">pl_main_save()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ddc3fb7e481bcf02c8c6057b43c0a8d7"></a><!-- doxytag: member="play_list.c::pl_g_list_is_open" ref="ddc3fb7e481bcf02c8c6057b43c0a8d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool <a class="el" href="a00049.html#ddc3fb7e481bcf02c8c6057b43c0a8d7">pl_g_list_is_open</a> = FALSE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
play list file is opened 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00085">85</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00277">pl_main_close()</a>, <a class="el" href="a00096.html#l00110">pl_main_isopen()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00236">pl_main_save()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d94e57810cfe431db7a638d79b188a7b"></a><!-- doxytag: member="play_list.c::pl_g_list_is_readonly" ref="d94e57810cfe431db7a638d79b188a7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool <a class="el" href="a00049.html#d94e57810cfe431db7a638d79b188a7b">pl_g_list_is_readonly</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If FALSE then the play list modification is autorized. 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00092">92</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, and <a class="el" href="a00096.html#l00163">pl_main_open()</a>.</p>

</div>
</div><p>
<a class="anchor" name="56182ff5f21080cdc39eb8270b329ea4"></a><!-- doxytag: member="play_list.c::pl_g_list_type" ref="56182ff5f21080cdc39eb8270b329ea4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ <a class="el" href="a00049.html#0c3455f08337dedcd64aa31097ef1918">E_pl_type</a> <a class="el" href="a00049.html#56182ff5f21080cdc39eb8270b329ea4">pl_g_list_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Type of the play list. 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00086">86</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00577">pl_main_readline()</a>.</p>

</div>
</div><p>
<a class="anchor" name="19ec89ed8b80790dfa2403cde5f8b2ce"></a><!-- doxytag: member="play_list.c::pl_g_list_undo" ref="19ec89ed8b80790dfa2403cde5f8b2ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool <a class="el" href="a00049.html#19ec89ed8b80790dfa2403cde5f8b2ce">pl_g_list_undo</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If TRUE then authorize to copy the play list file in case of an undo on modifications. 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00093">93</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00277">pl_main_close()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, and <a class="el" href="a00096.html#l00236">pl_main_save()</a>.</p>

</div>
</div><p>
<a class="anchor" name="43c5d67b8ebe2758b7362f58b755351c"></a><!-- doxytag: member="play_list.c::pl_g_u16_list_sel" ref="43c5d67b8ebe2758b7362f58b755351c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ U16 <a class="el" href="a00049.html#43c5d67b8ebe2758b7362f58b755351c">pl_g_u16_list_sel</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current file selected in play list (0= no file selected, 1= first file). 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00088">88</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00705">pl_add()</a>, <a class="el" href="a00096.html#l00336">pl_main_modify()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, <a class="el" href="a00096.html#l00236">pl_main_save()</a>, <a class="el" href="a00096.html#l00435">pl_nav_eol()</a>, <a class="el" href="a00096.html#l00426">pl_nav_getpos()</a>, <a class="el" href="a00096.html#l00502">pl_nav_readentry()</a>, <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>, <a class="el" href="a00096.html#l00893">pl_rem_dead()</a>, <a class="el" href="a00096.html#l00845">pl_rem_sel()</a>, and <a class="el" href="a00096.html#l00679">pl_sel_isvalid()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a18a22be8e8c964836b6d3abe35fe2d0"></a><!-- doxytag: member="play_list.c::pl_g_u16_list_size" ref="a18a22be8e8c964836b6d3abe35fe2d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ U16 <a class="el" href="a00049.html#a18a22be8e8c964836b6d3abe35fe2d0">pl_g_u16_list_size</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of file included in play list. 
<p>

<p>Definition at line <a class="el" href="a00096.html#l00087">87</a> of file <a class="el" href="a00096.html">play_list.c</a>.</p>

<p>Referenced by <a class="el" href="a00096.html#l00705">pl_add()</a>, <a class="el" href="a00096.html#l00163">pl_main_open()</a>, <a class="el" href="a00096.html#l00435">pl_nav_eol()</a>, <a class="el" href="a00096.html#l00416">pl_nav_getnbfile()</a>, <a class="el" href="a00096.html#l00502">pl_nav_readentry()</a>, <a class="el" href="a00096.html#l00444">pl_nav_setpos()</a>, <a class="el" href="a00096.html#l00893">pl_rem_dead()</a>, and <a class="el" href="a00096.html#l00845">pl_rem_sel()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Dec 21 18:30:25 2009 for AVR32 - FAT Services by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
